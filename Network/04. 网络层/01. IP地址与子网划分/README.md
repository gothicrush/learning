### IP地址

#### 作用

- 用于决定数据包最终到达哪个计算机

#### 组成

* 由32位比特组成，即4个字节
* 这32位可以分为两个部分，称为网络号和主机号
* 同一网段的计算机网络号相同，路由器负责连接不同的网段，而交换机负责连接同一网段中不同的计算机
* 同一网段的计算机主机号不同
* 计算机在和其他计算机进行通信之前需要判断目标IP和自己的IP网络是否相同
  * 相同，则目标MAC地址写目标计算机的MAC地址
  * 不同，则目标MAC地址写本网段的路由器的MAC地址

#### 表示方法

* 二进制表示法

  11111111.10110011.11101000.10010010

* 点分十进制法

  192.168.1.122

#### 分类

* A，B，C：用于日常使用
* D：用于组(多)播
* E：保留，目前还没用

![](https://github.com/gothicrush/learning/blob/master/Network/04.%20%E7%BD%91%E5%92%AF%E5%B1%82/01.%20IP%E5%9C%B0%E5%9D%80%E4%B8%8E%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86/images/%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB.jpg)



### 子网掩码

#### 作用

* 用于计算IP地址的网络号和主机号

#### 组成

* 表示网络号的位置全1，表示主机号的位置全0
* 比如C类地址：192.168.1.125，其子网掩码为 255.255.0.0

#### 原理

* 子网掩码与计算地址进行与计算，全1才1，有0则0
* 则计算结果网络号原样输出，主机号全为0

#### 分类

* A类：255.0.0.0
* B类：255.255.0.0
* C类：255.255.255.0
* D类：没有子网掩码
* E类：没有子网掩码



### 特殊地址

* 网段地址：主机号全0
* 广播地址：主机号全1
* 回环地址：127.0.0.1，只要装了TCP/IP就行，不需要经过网卡
* 回送地址：127.x.x.x
* 冲突地址：0.0.0.0，如果本机的IP和本网段中其他计算机相同(冲突)，则为0.0.0.0，子网掩码为0.0.0.0



### 公网内网

#### 公网

* 由美国机构 Inter NIC 负责，各国各级 ISP 使用的公网需要向Inter NIC申请

#### 内网

* 局域网

* A类：10.0.0.0/255.0.0.0
* B类：172.16.0.0/255.255.0.0 - 172.31.0.0/255.255.0.0
* C类：192.168.0.0/255.255.255.0 - 192.168.255.0/255.255.255.0

#### NAT/PAT

* 内网地址访问 Internet 需要 NAT/PAT 技术

* NAT：网络地址转换
  * 所有使用本地地址的主机在和外界通信时，都要在NAT路由器上将其本地地址转换成全球IP地址，才能和因特网连接
* PAT：端口地址转换
  * 在使用NAT时，如果只有一个公有IP，而有多个内部IP，这个时候NAT就要通过映射不同的端口来跟踪记录不同的会话
  * 则NAT会将用户A、B、C访问分别映射到1088、1098、23100【举例】，此时实际上就是PAT了



### 子网划分

#### 概念

* 子网划分就是利用现有网段的主机号的头几位作为网络号，这些位置称为子网号，子网号的概念只存在于分类编址

#### 作用

* 减少地址浪费

#### 注意

* 子网只能等分
* 主机号全为0不能用，因为这表示网段
* 主机号全为1不能用，因为这是广播地址
* 因此能用的主机号范围是 [差点全0，差点全1]

#### 例子

![](https://github.com/gothicrush/learning/blob/master/Network/04.%20%E7%BD%91%E5%92%AF%E5%B1%82/01.%20IP%E5%9C%B0%E5%9D%80%E4%B8%8E%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86/images/%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86.jpeg)



### 无分类编制

#### 概念

* 不分类了，只分网络号和主机号
* 通过子网掩码确定网络号和主机号

#### CIDR记法

* 一个无分类编制的IP地址为   

  11100110110010101001010101110101

  | 含义         | 网络号 | 主机号                     |
  | ------------ | ------ | -------------------------- |
  | 无分类编制IP | 111001 | 10110010101001010101110101 |
  | 子网掩码     | 111111 | 00000000000000000000000000 |

* CIDR记法为

  230.202.149.117/6

  其中6表示子网掩码的前6位是1，其他为0

#### 例子



![](https://github.com/gothicrush/learning/blob/master/Network/04.%20%E7%BD%91%E5%92%AF%E5%B1%82/01.%20IP%E5%9C%B0%E5%9D%80%E4%B8%8E%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86/images/%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%88%B6.jpeg)